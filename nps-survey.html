<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPS Survey – Ruhullah.pro</title>
</head>
<body>

    <h2>Quick Survey</h2>
    
    <form id="npsForm">
        <label for="npsScore">⭐ On a scale from 0 to 10, how likely are you to recommend ruhullah.pro? ⭐</label>
        <select id="npsScore" name="npsScore" required onchange="showFollowUp()">
            <option value="" disabled selected>Choose a score</option>
            <option value="0">0 - Not likely</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10 - Extremely likely</option>
        </select>

        <div id="followUpContainer" style="display: none;">
            <label for="followUp">What would make your score of <span id="currentScore"></span> a <span id="nextScore"></span>?</label>
            <input type="text" id="followUp" name="followUp" placeholder="Your feedback">
        </div>

        <button type="submit">Submit</button>
    </form>

    <div id="responseMessage" style="display: none;"></div>

    <script>
        function showFollowUp() {
            let score = document.getElementById("npsScore").value;
            let followUpContainer = document.getElementById("followUpContainer");
            let currentScore = document.getElementById("currentScore");
            let nextScore = document.getElementById("nextScore");

            if (score < 10) {
                followUpContainer.style.display = "block";
                currentScore.innerText = score;
                nextScore.innerText = parseInt(score) + 1;
            } else {
                followUpContainer.style.display = "none";
            }
        }

        document.getElementById("npsForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevents page reload

            let score = document.getElementById("npsScore").value;
            let followUp = document.getElementById("followUp") ? document.getElementById("followUp").value : "";

            fetch("YOUR_WEB_APP_URL", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ npsScore: score, followUp: followUp })
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById("responseMessage").innerText = "Thanks for your feedback!";
                document.getElementById("responseMessage").style.display = "block";
                document.getElementById("npsForm").reset();
            })
            .catch(error => console.error("Error:", error));
        });
    </script>

</body>
</html>
